!function(e){var t="undefined"!=typeof window?window:this;"object"==typeof module&&"object"==typeof module.exports?module.exports=t.document?e(t):function(t){if(!t.document)throw new Error("document is a undefined");return e(t)}:e(t)}(function(e){function t(){var e=new Date;this.hours=!1,this.hoursPast=!1,this.focusObj=null,this.shield="[]",this.startDate="",this.startJSON={},this.fixDate={y:e.getFullYear(),m:e.getMonth()+1,d:0},this.init()}function a(e,t){function a(e){function a(e){var a=e.targetTouches?e.targetTouches[0]:e||event;return s=a.pageX-r,D?!1:(Math.abs(s)>=o&&(D=!0,t&&t(l,s)),a.preventDefault&&a.preventDefault(),!1)}function n(){this.ontouchmove&&(this.ontouchmove=null),this.ontouchend&&(this.ontouchend=null),this.onmousemove&&(this.onmousemove=null),this.onmouseup&&(this.onmouseup=null)}var s,i=e.targetTouches?e.targetTouches[0]:e||event,r=i.pageX,o=parseInt(document.documentElement.clientWidth/5,10),l=this;this.ontouchmove=a,this.onmousemove=a,this.ontouchend=n,this.onmouseup=n}e.ontouchstart=a,e.onmousedown=a}function n(e,t,a){if(t){var n=e.className.replace(/\s+/g," ");n=n.split(" "),t=t.replace("^s+|s+$").replace(/\s+/," ").split(" "),a=a||"add";for(var s=0;s<n.length;s++)switch(a){case"has":if(t[0]==n[s])return!0;break;case"add":case"remove":for(var i=0;i<t.length;i++)t[i]==n[s]&&n.splice(s,1)}"add"==a&&(n=n.concat(t)),e.className=n.join(" ")}}function s(e,t){var a,n=t.charAt(0);switch(n){case"#":a=e.getElementById(t.substring(1));break;case".":a=e.getElementsByClassName(t.substring(1));break;default:a=e.getElementsByTagName(t)}return a}function i(e,t,a){if(e){t=t||{},a=a||"";var n=document.createElement(e);for(var s in t)n.setAttribute(s,t[s]);return n.innerHTML=a,n}}function r(){n(x,"close"),setTimeout(function(){n(x,"active close","remove")},290)}function o(e,t){if(!e)return!1;e=e.split("/"),t=t||"y/m/d";for(var a=t.charAt(0),n=0,s=0;s<t.length;s++)a.charAt(n)!=t.charAt(s)&&(a+=t.charAt(s),n++);var i={y:e[0],m:e[1],d:e[2]},r="",o="";/\//g.test(a)?r="/":/\-/g.test(a)&&(r="-"),a=a.split(r);for(var s=0;s<a.length;s++)o+=i[a[s]],s<a.length-1&&(o+=r);return o}function l(e){if(e=e.replace(/[\'\s]+/g,"")){e=e.match(/(\d+[\/\-]\d+[\/\-]\d+)/g);for(var t=[],a=0;a<e.length;a++){var n=e[a].match(/\d+/g),s={};3==n.length?(s.m=n[1],4==n[0].length?(s.y=n[0],s.d=n[2]):(s.d=n[0],s.y=n[2])):2==n.length&&(4==n[0].length?(s.y=n[0],s.m=n[1]):n[0].length<=2&&(s.m=n[0],s.d=n[1])),t.push(s)}return t}}function c(e,t,a){if(!e)return null;switch(arguments.length){case 3:e.setAttribute(t,a);break;case 2:return e.getAttribute(t)}}var h,d,u,p,v,f,m,y,g=0,w=0,D=!1,x=i("div",{"class":"calen-wrap"}),b=i("div",{"class":"calen-mask"}),C=i("div",{"class":"calen"}),j=i("div",{"class":"calen-list"});return t.prototype.init=function(){var e=this,t=s(document,".calendars");if(t.length){document.body.appendChild(x),x.appendChild(b),x.appendChild(C),calenTitle=s(C,".calen-title"),this.createHeader(function(){e.createWeek(),C.appendChild(j),a(j,function(t,a){a>0?g--:g++,e.startJSON.prev.m=g-1,e.startJSON.now.m=g,e.startJSON.next.m=g+1,e.transitions(t,a)});for(var t=0;t<d.length;t++)d[t].onclick=function(){if(n(this,"calen-month-txt","has")){n(y,"active",y.show?"remove":"add"),m.show&&(n(m,"active","remove"),m.show=!1);for(var e=0;e<u.length;e++)c(u[e],"data-value")==c(this,"data-value")?n(u[e],"active"):n(u[e],"active","remove");y.show=!y.show}else if(n(this,"calen-year-txt","has")){n(m,"active",m.show?"remove":"add"),y.show&&(n(y,"active","remove"),y.show=!1);for(var e=0;e<p.length;e++)c(p[e],"data-value")==c(this,"data-value")?n(p[e],"active"):n(p[e],"active","remove");m.show=!m.show}}}),this.createDate({},function(t){for(var a=0;a<u.length;a++)t[a].onclick=function(){for(var a=0;a<t.length;a++)n(t[a],"active","remove");g+=c(this,"data-value")-c(f,"data-value"),e.selectDate(this,y,"m",g)}});for(var i=0;i<t.length;i++)t[i].ontouchstart=t[i].onmousedown=function(){if(null==c(this,"disabled")){var t=Number(c(this,"start"))||1915,s=Number(c(this,"end"))||2020;h=!(null==c(this,"past")),e.hours=!(null==c(this,"hours")),e.hoursPast=!(null==c(this,"hours-past")),e.shield=l(c(this,"shield")||""),e.startDate=l(c(this,"start-date")||"");var i,r,o,d=new Date;if(e.startDate instanceof Array&&e.startDate.length){var u=e.startDate[0];w=u.y-d.getFullYear(),g=u.m-(d.getMonth()+1);for(var p in u)e.fixDate[p]=u[p];i={y:w,m:g-1,d:u.d},r={y:w,m:g,d:u.d},o={y:w,m:g+1,d:u.d},e.startJSON={prev:i,now:r,next:o}}else e.fixDate.y=d.getFullYear(),e.fixDate.m=d.getMonth()+1,e.fixDate.d=0;return e.focusObj!=this&&((!e.startDate instanceof Array||!e.startDate)&&(g=0,w=0,e.startJSON.prev={y:w,m:g-1},e.startJSON.now={y:w,m:g},e.startJSON.next={y:w,m:g+1}),e.appendList(e.startJSON,function(){e.addEvent()}),e.createDate({start:t,end:s,type:"year"},function(t){for(var s=0;s<t.length;s++)t[s].onclick=function(){for(var a=0;a<t.length;a++)n(t[a],"active","remove");w+=c(this,"data-value")-c(v,"data-value"),e.selectDate(this,m,"y",w)};a(m,function(e,t){m.index=m.index||0;var a=m.children.length;t>0?(m.index++,m.index>=0&&(m.index=0)):(m.index--,m.index<=-a&&(m.index=-(a-1)));var n="translateX("+m.index*(100/a)+"%)";m.style.WebkitTransform=n,m.style.transform=n,setTimeout(function(){D=!1},500)})})),n(x,"active"),e.focusObj=this,this.blur(),!1}};C.onclick=function(e){var t=e.targetTouches?e.targetTouches[0]:e||event;t.cancelBubble=!0},b.onclick=r}},t.prototype.createCalenList=function(e,t){function a(t,a,n){if(!o.shield)return!1;for(var s=0;s<o.shield.length;s++)if(o.shield[s].y=o.shield[s].y||e.getFullYear(),o.shield[s].m=o.shield[s].m||e.getMonth()+1,o.shield[s].d=o.shield[s].d||e.getDate(),t==o.shield[s].y&&a==o.shield[s].m&&n==o.shield[s].d)return!0;return!1}var s=document.createElement("div"),r=0,o=this;e=e||{},e.m=e.m||0,e.y=e.y||0;var l=new Date,l=new Date,d=l.getDate();l.setFullYear(l.getFullYear()+e.y,l.getMonth()+e.m+1,1,0,0,0),l.setDate(0);var u=l.getDate();l.setDate(1);var p=l.getDay(),l=new Date;l.setFullYear(l.getFullYear()+e.y,l.getMonth()+e.m,1,0,0,0);var m=l.getMonth()+1,y=l.getFullYear();l.setDate(0);for(var g=l.getDate(),w=[],D=g;D>0;D--)w.push(D);t&&(v.innerHTML=y,f.innerHTML=10>m?"0"+m:m,c(v,"data-value",y),c(f,"data-value",m-1));var x=p+7;x=x>=10?x-7:x;for(var D=0;x>D;D++){var b=i("span"),C=i("a",{"data-calen":y+"/"+(m-1)+"/"+w[D],"class":"prev-m prev-to-month pasted",href:"javascript:;"},w[D]);(w[D]==d&&1==e.m&&!e.y&&!e.d||!e.y&&Number(o.fixDate.m)+1==m&&o.fixDate.d==w[D])&&n(C,"today"),a(y,m-1,w[D])&&n(C,"pasted shield"),b.appendChild(C),s.children.length?s.insertBefore(b,s.children[0]):s.appendChild(b),r++}for(var D=0;u>D;D++){r++;{var j=D+1,b=i("span"),C=i("a",{"data-calen":y+"/"+m+"/"+j,href:"javascript:;"},j);new Date}switch(r%7){case 0:case 1:C.className="weekend"}!e.m&&!e.y||!e.y&&o.fixDate.m==m?(console.log(o.fixDate.d,j,d),o.fixDate.d==j&&e.m||!o.fixDate.d&&j==d?C.className=C.className+" today":(h||o.hoursPast)&&d>j&&(C.className=C.className+" expire pasted")):(h||o.hoursPast)&&e.m<0&&e.y<=0&&(C.className=" expire pasted"),(y<=o.fixDate.y&&m<=o.fixDate.m&&j<e.d||y<=o.fixDate.y&&m<o.fixDate.m)&&o.startDate&&n(C,"expire pasted"),a(y,m,j)&&n(C,"pasted shield"),b.appendChild(C),s.appendChild(b)}for(var O=42-s.children.length,D=0;O>D;D++){var j=D+1,b=i("span"),C=i("a",{"data-calen":y+"/"+(m+1)+"/"+j,"class":"next-m next-to-month",href:"javascript:;"},j);(j==d&&-1==e.m&&!e.y&&!e.d||!e.y&&o.fixDate.m-1==m&&o.fixDate.d==j)&&n(C,"today"),a(y,m+1,j)&&n(C,"pasted shield"),b.appendChild(C),s.appendChild(b)}return s},t.prototype.createDate=function(e,t){e=e||{},e.start=e.start||1,e.end=e.end||12,e.type=e.type||"month";for(var a=i("div",{"class":"month"==e.type?"calen-months":"calen-years"}),n=i("div"),s=[],r=0,o=0,l=0,c=(new Date).getFullYear(),h=e.start;h<=e.end;h++){var d=i("span"),v=i("a",{"data-value":"year"==e.type?h:h-1,href:"javascript:;"},10>h?"0"+h:h);s.push(v),"year"==e.type?(r>=12&&(a.appendChild(n),n=i("div"),r=0,o++),h==c&&(l=o),d.appendChild(v),n.appendChild(d)):(d.appendChild(v),a.appendChild(d)),r++}if("year"==e.type){m&&C&&C.removeChild(m),a.appendChild(n),m=a,p=s,r&&o++,a.style.width=100*o+"%";for(var h=0;o>h;h++)a.children[h].style.width=100/o+"%";a.style.WebkitTransform="translateX(-"+l*(100/o)+"%)",a.style.transform="translateX(-"+l*(100/o)+"%)",m.index=-l}else y&&C&&C.removeChild(y),y=a,u=s;C.appendChild(a),t&&t(s)},t.prototype.createTime=function(e,t,a){var o=s(C,".calen-time"),l=[],h=new Date,d=h.getDate(),u=h.getHours(),p=this;if(o.length){o=o[0];for(var v=s(o,"a"),f=0;f<v.length;f++)l.push({obj:v[f],time:parseInt(c(v[f],"data-time"),10)})}else{o=i("div",{"class":"calen-time"});for(var f=0;24>f;f++){var m=10>f?"0"+f:f;m+=":00";var y=i("span"),D=i("a",{href:"javascript:;","data-time":m},m);y.appendChild(D),o.appendChild(y),l.push({obj:D,time:parseInt(m,10)})}}n(o,"active");for(var f=0;f<l.length;f++)p.hoursPast&&(0>g&&0>=w||a==d&&l[f].time<=u||0>=g&&0>=w&&d>a)?(n(l[f].obj,"expire pasted"),l[f].obj.active=!1):(n(l[f].obj,"expire pasted","remove"),l[f].obj.active=!0),function(a){l[f].obj.onclick=function(){if(this.active){var s=t+" "+(10>a?"0"+a:a)+":00";null!=e.value?e.value=s:null!=e.innerHTML&&(e.innerHTML=s),r()}n(o,"active","remove")}}(l[f].time);C.appendChild(o)},t.prototype.createHeader=function(e){d=d||[];var t=this,a=i("div",{"class":"calen-header"}),s=i("div",{"class":"calen-year"}),r=i("a",{"class":"float-l year-prev switch-btn",href:"javascript:;"},"&lt;"),o=i("a",{"class":"float-r year-next switch-btn",href:"javascript:;"},"&gt;"),l=i("a",{"class":"calen-year-txt calen-title",href:"javascript:;"});s.appendChild(r),s.appendChild(l),s.appendChild(o);var c=i("div",{"class":"calen-month"}),h=i("a",{"class":"float-l month-prev switch-btn",href:"javascript:;"},"&lt;"),u=i("a",{"class":"float-r month-next switch-btn",href:"javascript:;"},"&gt;"),p=i("a",{"class":"calen-month-txt calen-title",href:"javascript:;"});c.appendChild(h),c.appendChild(p),c.appendChild(u),a.appendChild(s),a.appendChild(c),d.push(l,p),f=p,v=l,h.onclick=function(){t.switchDate(-1)},u.onclick=function(){t.switchDate(1)},r.onclick=function(){t.switchDate(-1,"year")},o.onclick=function(){t.switchDate(1,"year")},C.children.length?C.insertBefore(a,C.children[0]):C.appendChild(a);for(var m=0;m<a.children.length;m++)a.children[m].ontouchstart=function(){n(this,"active")},a.children[m].ontouchend=function(){n(this,"active","remove")};e&&e()},t.prototype.createWeek=function(){for(var e=i("div",{"class":"calen-week"}),t="日一二三四五六",a=0;7>a;a++){var n=a+1,s={};(n%7==1||n%7==0)&&(s["class"]="weekend"),e.appendChild(i("span",s,t.charAt(a)))}C.appendChild(e)},t.prototype.appendList=function(e,t){e=e||{},e.prev=e.prev||{m:g-1,y:w},e.now=e.now||{m:g,y:w},e.next=e.next||{m:g+1,y:w},j.innerHTML="",j.appendChild(this.createCalenList(e.prev)),j.appendChild(this.createCalenList(e.now,!0)),j.appendChild(this.createCalenList(e.next)),t&&t()},t.prototype.addEvent=function(){for(var t=this,a=j.getElementsByTagName("a"),s=0;s<a.length;s++)a[s].onclick=function(){if(n(this,"prev-to-month","has"))t.switchDate(-1);else if(n(this,"next-to-month","has"))t.switchDate(1);else if(!n(this,"pasted","has")&&!n(this,"shield","has")){var a=c(this,"data-calen"),s=this.innerHTML;if(a=o(a,c(t.focusObj,"format")||!1),t.hours)t.createTime(t.focusObj,a,s,h);else{if(t.focusObj&&"undefined"==typeof t.focusObj.value)t.focusObj.innerHTML=a;else if(t.focusObj){var i=typeof t.focusObj.value;if(("string"===i||"number"===i)&&t.focusObj.oldValue!=a){t.focusObj.value=a,t.focusObj.oldValue=a;var l=e.jQuery||e.$||null;l?l(t.focusObj)&&l(t.focusObj).change&&l(t.focusObj).change():t.focusObj.onchange&&t.focusObj.onchange()}}r()}}}},t.prototype.switchDate=function(e,t){var a=this;switch(t=t||"month"){case"month":e>0?g++:g--,a.startJSON.prev.m=g-1,a.startJSON.now.m=g,a.startJSON.next.m=g+1,a.transitions(j,e>0?-1:1);break;case"year":a.appendList({prev:{m:g,y:w-1},next:{m:g,y:w+1}},function(){e>0?w++:w--,a.startJSON.prev.y=w,a.startJSON.now.y=w,a.startJSON.next.y=w,a.transitions(j,e>0?-1:1)})}},t.prototype.transitions=function(e,t){function a(){s.appendList(s.startJSON,function(){n(e,"silde prev-to next-to","remove"),s.addEvent(),D=!1})}var s=this;t>0?n(e,"silde prev-to"):n(e,"silde next-to"),setTimeout(function(){a()},500)},t.prototype.selectDate=function(e,t,a,s){var i=this;this.startJSON.prev[a]="m"==a?s-1:s,this.startJSON.now[a]=s,this.startJSON.next[a]="m"==a?s+1:s,this.appendList(this.startJSON,function(){i.addEvent()}),n(e,"active"),n(t,"active","remove"),m.show=!1,y.show=!1},e.addEventListener("load",function(){new t},!1),t});